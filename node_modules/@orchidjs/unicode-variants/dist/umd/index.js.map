{"version":3,"file":"index.js","sources":["../../lib/regex.mjs","../../lib/strings.mjs","../../lib/index.mjs"],"sourcesContent":["\n/**\n * Convert array of strings to a regular expression\n *\tex ['ab','a'] => (?:ab|a)\n * \tex ['a','b'] => [ab]\n * @param {string[]} chars\n * @return {string}\n */\nexport const arrayToPattern = (chars) =>{\n\n\tchars = chars.filter( Boolean );\n\n\tif( chars.length < 2 ){\n\t\treturn chars[0] || '';\n\t}\n\n\treturn (maxValueLength(chars) == 1) ? '['+chars.join('')+']' : '(?:'+chars.join('|')+')';\n};\n\n/**\n * @param {string[]} array\n * @return {string}\n */\nexport const sequencePattern = (array)=>{\n\n\tif( !hasDuplicates(array) ){\n\t\treturn array.join('');\n\t}\n\n\tlet pattern = '';\n\tlet prev_char_count = 0;\n\n\tconst prev_pattern = ()=>{\n\t\tif( prev_char_count > 1 ){\n\t\t\tpattern += '{'+prev_char_count+'}';\n\t\t}\n\t}\n\n\tarray.forEach((char,i)=>{\n\n\t\tif( char === array[i-1] ){\n\t\t\tprev_char_count++;\n\t\t\treturn;\n\t\t}\n\n\t\tprev_pattern();\n\n\t\tpattern += char;\n\t\tprev_char_count = 1;\n\t});\n\n\tprev_pattern();\n\n\treturn pattern;\n\n}\n\n\n\n/**\n * Convert array of strings to a regular expression\n *\tex ['ab','a'] => (?:ab|a)\n * \tex ['a','b'] => [ab]\n * @param {Set<string>} chars\n * @return {string}\n */\nexport const setToPattern = (chars)=>{\n\tlet array = toArray(chars);\n\treturn arrayToPattern(array);\n}\n\n\n\n/**\n *\n * https://stackoverflow.com/questions/7376598/in-javascript-how-do-i-check-if-an-array-has-duplicate-values\n * @param {any[]} array\n */\nexport const hasDuplicates = (array) => {\n    return (new Set(array)).size !== array.length;\n}\n\n\n/**\n * https://stackoverflow.com/questions/63006601/why-does-u-throw-an-invalid-escape-error\n * @param {string} str\n * @return {string}\n */\nexport const escape_regex = (str) => {\n\treturn (str + '').replace(/([\\$\\(\\)\\*\\+\\.\\?\\[\\]\\^\\{\\|\\}\\\\])/gu, '\\\\$1');\n};\n\n/**\n * Return the max length of array values\n * @param {string[]} array\n *\n */\nexport const maxValueLength = (array) => {\n\treturn array.reduce( (longest, value) => Math.max(longest,unicodeLength(value)),0);\n}\n\n\n/**\n * @param {string} str\n */\nexport const unicodeLength = (str) => {\n\treturn toArray(str).length;\n}\n\n/**\n * @param {any} p\n * @return {any[]}\n */\nexport const toArray = (p) => Array.from(p);\n","\n\n\n/**\n * Get all possible combinations of substrings that add up to the given string\n * https://stackoverflow.com/questions/30169587/find-all-the-combination-of-substrings-that-add-up-to-the-given-string\n * @param {string} input\n * @return {string[][]}\n */\nexport const allSubstrings = (input) => {\n\n    if( input.length === 1) return [[input]];\n\n\t/** @type {string[][]} */\n    let result = [];\n\n\tconst start = input.substring(1);\n    const suba = allSubstrings(start);\n\n\tsuba.forEach(function(subresult) {\n        let tmp = subresult.slice(0);\n        tmp[0] = input.charAt(0) + tmp[0];\n        result.push(tmp);\n\n        tmp = subresult.slice(0);\n        tmp.unshift(input.charAt(0));\n        result.push(tmp);\n    });\n\n    return result;\n}\n","\n/**\n * @typedef {{[key:string]:string}} TUnicodeMap\n * @typedef {{[key:string]:Set<string>}} TUnicodeSets\n * @typedef {[[number,number]]} TCodePoints\n * @typedef {{folded:string,composed:string,code_point:number}} TCodePointObj\n * @typedef {{start:number,end:number,length:number,substr:string}} TSequencePart\n */\n\n\nimport { setToPattern, arrayToPattern, escape_regex, sequencePattern, toArray } from './regex.mjs';\nimport { allSubstrings } from './strings.mjs';\n\n\n/** @type {TCodePoints} */\nexport const code_points = [[ 0, 65535 ]];\n\nconst accent_pat = '[\\u0300-\\u036F\\u{b7}\\u{2be}\\u{2bc}]';\n\n/** @type {TUnicodeMap} */\nexport let unicode_map;\n\n/** @type {RegExp} */\nlet multi_char_reg;\n\nconst max_char_length = 3;\n\n/** @type {TUnicodeMap} */\nconst latin_convert = {}\n\n/** @type {TUnicodeMap} */\nconst latin_condensed = {\n\t'/': '⁄∕',\n\t'0': '߀',\n\t\"a\": \"ⱥɐɑ\",\n\t\"aa\": \"ꜳ\",\n\t\"ae\": \"æǽǣ\",\n\t\"ao\": \"ꜵ\",\n\t\"au\": \"ꜷ\",\n\t\"av\": \"ꜹꜻ\",\n\t\"ay\": \"ꜽ\",\n\t\"b\": \"ƀɓƃ\",\n\t\"c\": \"ꜿƈȼↄ\",\n\t\"d\": \"đɗɖᴅƌꮷԁɦ\",\n\t\"e\": \"ɛǝᴇɇ\",\n\t\"f\": \"ꝼƒ\",\n\t\"g\": \"ǥɠꞡᵹꝿɢ\",\n\t\"h\": \"ħⱨⱶɥ\",\n\t\"i\": \"ɨı\",\n\t\"j\": \"ɉȷ\",\n\t\"k\": \"ƙⱪꝁꝃꝅꞣ\",\n\t\"l\": \"łƚɫⱡꝉꝇꞁɭ\",\n\t\"m\": \"ɱɯϻ\",\n\t\"n\": \"ꞥƞɲꞑᴎлԉ\",\n\t\"o\": \"øǿɔɵꝋꝍᴑ\",\n\t\"oe\": \"œ\",\n\t\"oi\": \"ƣ\",\n\t\"oo\": \"ꝏ\",\n\t\"ou\": \"ȣ\",\n\t\"p\": \"ƥᵽꝑꝓꝕρ\",\n\t\"q\": \"ꝗꝙɋ\",\n\t\"r\": \"ɍɽꝛꞧꞃ\",\n\t\"s\": \"ßȿꞩꞅʂ\",\n\t\"t\": \"ŧƭʈⱦꞇ\",\n\t\"th\": \"þ\",\n\t\"tz\": \"ꜩ\",\n\t\"u\": \"ʉ\",\n\t\"v\": \"ʋꝟʌ\",\n\t\"vy\": \"ꝡ\",\n\t\"w\": \"ⱳ\",\n\t\"y\": \"ƴɏỿ\",\n\t\"z\": \"ƶȥɀⱬꝣ\",\n\t\"hv\": \"ƕ\"\n}\n\n\nfor( let latin in latin_condensed ){\n\tlet unicode = latin_condensed[latin] || '';\n\tfor( let i = 0; i < unicode.length; i++){\n\t\tlet char\t= unicode.substring(i,i+1);\n\t\tlatin_convert[char] = latin;\n\t}\n}\n\n\nconst convert_pat = new RegExp(Object.keys(latin_convert).join('|')+'|'+accent_pat,'gu');\n\n\n\n/**\n * Initialize the unicode_map from the give code point ranges\n *\n * @param {TCodePoints=} _code_points\n */\nexport const initialize = (_code_points) => {\n\tif( unicode_map !== undefined ) return;\n\tunicode_map = generateMap(_code_points || code_points );\n}\n\n\n/**\n * Helper method for normalize a string\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\n * @param {string} str\n * @param {string} form\n */\nexport const normalize = (str,form='NFKD') => str.normalize(form);\n\n\n\n/**\n * Remove accents without reordering string\n * calling str.normalize('NFKD') on \\u{594}\\u{595}\\u{596} becomes \\u{596}\\u{594}\\u{595}\n * via https://github.com/krisk/Fuse/issues/133#issuecomment-318692703\n * @param {string} str\n * @return {string}\n */\nexport const asciifold = (str) => {\n\n\treturn toArray(str).reduce(\n\t\t/**\n\t\t * @param {string} result\n\t\t * @param {string} char\n\t\t */\n\t\t(result, char) =>{\n\t\t\treturn result + _asciifold(char)\n\t\t},\n\t\t''\n\t);\n};\n\n/**\n * @param {string} str\n * @return {string}\n */\nexport const _asciifold = (str) => {\n\tstr = normalize(str)\n\t\t.toLowerCase()\n\t\t.replace(convert_pat,(/** @type {string} */ char) => {\n\t\t\treturn latin_convert[char] || '';\n\t\t})\n\n\t//return str;\n\treturn normalize(str,'NFC')\n};\n\n\n\n\n\n\n/**\n * Generate a list of unicode variants from the list of code points\n * @param {TCodePoints} code_points\n * @yield {TCodePointObj}\n */\nexport function* generator(code_points){\n\n\tfor(const [code_point_min, code_point_max] of code_points){\n\t\tfor(let i = code_point_min; i <= code_point_max; i++){\n\n\t\t\tlet composed\t\t= String.fromCharCode(i);\n\t\t\tlet folded\t\t\t= asciifold(composed);\n\n\n\t\t\tif( folded == composed.toLowerCase() ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// skip when folded is a string longer than 3 characters long\n\t\t\t// bc the resulting regex patterns will be long\n\t\t\t// eg:\n\t\t\t// folded صلى الله عليه وسلم length 18 code point 65018\n\t\t\t// folded جل جلاله length 8 code point 65019\n\t\t\tif( folded.length > max_char_length ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( folded.length == 0 ){\n\t\t\t\tcontinue\n\t\t\t}\n\n\n\t\t\tyield {folded:folded,composed:composed,code_point:i};\n\t\t}\n\t}\n}\n\n\n/**\n * Generate a unicode map from the list of code points\n * @param {TCodePoints} code_points\n * @return {TUnicodeSets}\n */\nexport const generateSets = (code_points) => {\n\n\t/** @type {{[key:string]:Set<string>}} */\n\tconst unicode_sets = {};\n\n\n\t/**\n\t * @param {string} folded\n\t * @param {string} to_add\n\t */\n\tconst addMatching = (folded,to_add) => {\n\n\t\t/** @type {Set<string>} */\n\t\tconst folded_set = unicode_sets[folded] || new Set();\n\n\t\tconst patt = new RegExp( '^'+setToPattern(folded_set)+'$','iu');\n\t\tif( to_add.match(patt) ){\n\t\t\treturn;\n\t\t}\n\n\t\tfolded_set.add(escape_regex(to_add));\n\t\tunicode_sets[folded] = folded_set;\n\t}\n\n\n\tfor( let value of generator(code_points) ){\n\t\taddMatching(value.folded,value.folded);\n\t\taddMatching(value.folded,value.composed);\n\t}\n\n\treturn unicode_sets;\n}\n\n/**\n * Generate a unicode map from the list of code points\n * ae => (?:(?:ae|Æ|Ǽ|Ǣ)|(?:A|Ⓐ|Ａ...)(?:E|ɛ|Ⓔ...))\n *\n * @param {TCodePoints} code_points\n * @return {TUnicodeMap}\n */\nexport const generateMap = (code_points) => {\n\n\t/** @type {TUnicodeSets} */\n\tconst unicode_sets = generateSets(code_points);\n\n\t/** @type {TUnicodeMap} */\n\tconst unicode_map = {};\n\n\t/** @type {string[]} */\n\tlet multi_char = [];\n\n\tfor( let folded in unicode_sets ){\n\n\t\tlet set = unicode_sets[folded];\n\t\tif( set ){\n\t\t\tunicode_map[folded] = setToPattern(set);\n\t\t}\n\n\t\tif( folded.length > 1 ){\n\t\t\tmulti_char.push(escape_regex(folded));\n\t\t}\n\t}\n\n\tmulti_char.sort((a, b) => b.length - a.length );\n\tconst multi_char_patt = arrayToPattern(multi_char);\n\tmulti_char_reg = new RegExp('^'+multi_char_patt,'u');\n\n\treturn unicode_map;\n}\n\n\n/**\n * Map each element of an array from it's folded value to all possible unicode matches\n * @param {string[]} strings\n * @param {number} min_replacement\n * @return {string}\n */\nexport const mapSequence = (strings,min_replacement=1) =>{\n\tlet chars_replaced = 0;\n\n\n\tstrings = strings.map((str)=>{\n\t\tif( unicode_map[str] ){\n\t\t\tchars_replaced += str.length;\n\t\t}\n\t\treturn unicode_map[str] || str;\n\t});\n\n\tif( chars_replaced >= min_replacement ){\n\t\treturn sequencePattern(strings);\n\t}\n\n\treturn '';\n}\n\n/**\n * Convert a short string and split it into all possible patterns\n * Keep a pattern only if min_replacement is met\n *\n * 'abc'\n * \t\t=> [['abc'],['ab','c'],['a','bc'],['a','b','c']]\n *\t\t=> ['abc-pattern','ab-c-pattern'...]\n *\n *\n * @param {string} str\n * @param {number} min_replacement\n * @return {string}\n */\nexport const substringsToPattern = (str,min_replacement=1) => {\n\n\tmin_replacement = Math.max(min_replacement,str.length-1);\n\n\treturn arrayToPattern(\n\t\tallSubstrings(str).map( (sub_pat) =>{\n\t\t\treturn mapSequence(sub_pat,min_replacement)\n\t\t})\n\t);\n}\n\n/**\n * Convert an array of sequences into a pattern\n * [{start:0,end:3,length:3,substr:'iii'}...] => (?:iii...)\n *\n * @param {Sequence[]} sequences\n * @param {boolean} all\n */\nconst sequencesToPattern = (sequences,all=true) => {\n\n\tlet min_replacement = sequences.length > 1 ? 1 : 0;\n\treturn arrayToPattern(\n\t\tsequences.map( (sequence) =>{\n\t\t\tlet seq = [];\n\t\t\tconst len = all ? sequence.length() : sequence.length() - 1;\n\t\t\tfor( let j = 0; j < len; j++){\n\t\t\t\tseq.push(substringsToPattern(sequence.substrs[j]||'',min_replacement));\n\t\t\t}\n\n\t\t\treturn sequencePattern(seq);\n\t\t})\n\t);\n}\n\n/**\n * Return true if the sequence is already in the sequences\n * @param {Sequence} needle_seq\n * @param {Sequence[]} sequences\n */\nconst inSequences = (needle_seq, sequences) => {\n\n\tfor(const seq of sequences){\n\n\t\tif( seq.start != needle_seq.start || seq.end != needle_seq.end ){\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( seq.substrs.join('') !== needle_seq.substrs.join('') ){\n\t\t\tcontinue;\n\t\t}\n\n\n\t\tlet needle_parts\t= needle_seq.parts;\n\n\t\t/**\n\t\t * @param {TSequencePart} part\n\t\t */\n\t\tconst filter = (part) =>{\n\n\t\t\tfor(const needle_part of needle_parts){\n\n\t\t\t\tif( needle_part.start === part.start && needle_part.substr === part.substr ){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif( part.length == 1 || needle_part.length == 1 ){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\n\t\t\t\t// check for overlapping parts\n\t\t\t\t// a = ['::=','==']\n\t\t\t\t// b = ['::','===']\n\t\t\t\t// a = ['r','sm']\n\t\t\t\t// b = ['rs','m']\n\t\t\t\tif( part.start < needle_part.start && part.end > needle_part.start ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif( needle_part.start < part.start && needle_part.end > part.start ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tlet filtered = seq.parts.filter(filter);\n\n\t\tif( filtered.length > 0 ){\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nclass Sequence{\n\n\tconstructor(){\n\n\t\t/** @type {TSequencePart[]} */\n\t\tthis.parts\t\t= [];\n\n\t\t/** @type {string[]} */\n\t\tthis.substrs\t= [];\n\t\tthis.start\t\t= 0;\n\t\tthis.end\t\t= 0;\n\t}\n\n\t/**\n\t * @param {TSequencePart|undefined} part\n\t */\n\tadd(part){\n\t\tif( part ){\n\t\t\tthis.parts.push(part);\n\t\t\tthis.substrs.push(part.substr);\n\t\t\tthis.start\t= Math.min(part.start,this.start);\n\t\t\tthis.end\t= Math.max(part.end,this.end);\n\t\t}\n\t}\n\n\tlast(){\n\t\treturn this.parts[this.parts.length-1];\n\t}\n\n\tlength(){\n\t\treturn this.parts.length;\n\t}\n\n\t/**\n\t * @param {number} position\n\t * @param {TSequencePart} last_piece\n\t */\n\tclone(position, last_piece){\n\t\tlet clone = new Sequence();\n\n\t\tlet parts = JSON.parse(JSON.stringify(this.parts));\n\t\tlet last_part = parts.pop();\n\t\tfor( const part of parts ){\n\t\t\tclone.add(part);\n\t\t}\n\n\t\tlet last_substr = last_piece.substr.substring(0,position-last_part.start);\n\t\tlet clone_last_len = last_substr.length;\n\t\tclone.add({start:last_part.start,end:last_part.start+clone_last_len,length:clone_last_len,substr:last_substr});\n\n\t\treturn clone;\n\t}\n\n}\n\n/**\n * Expand a regular expression pattern to include unicode variants\n * \teg /a/ becomes /aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑAⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ/\n *\n * Issue:\n *  ﺊﺋ [ 'ﺊ = \\\\u{fe8a}', 'ﺋ = \\\\u{fe8b}' ]\n *\tbecomes:\tئئ [ 'ي = \\\\u{64a}', 'ٔ = \\\\u{654}', 'ي = \\\\u{64a}', 'ٔ = \\\\u{654}' ]\n *\n *\tİĲ = IIJ = ⅡJ\n *\n * \t1/2/4\n *\n * @param {string} str\n * @return {string|undefined}\n */\nexport const getPattern = (str) => {\n\tinitialize();\n\n\tstr\t\t\t\t\t= asciifold(str);\n\n\tlet pattern\t\t\t= '';\n\tlet sequences\t\t= [new Sequence()];\n\n\tfor( let i = 0; i < str.length; i++ ){\n\n\t\tlet substr\t= str.substring(i);\n\t\tlet match\t= substr.match(multi_char_reg);\n\t\tconst char\t= str.substring(i,i+1);\n\t\tconst match_str = match ? match[0] : null;\n\n\n\t\t// loop through sequences\n\t\t// add either the char or multi_match\n\t\tlet overlapping\t\t= [];\n\t\tlet added_types\t\t= new Set();\n\t\tfor(const sequence of sequences){\n\n\t\t\tconst last_piece\t= sequence.last();\n\n\n\t\t\tif( !last_piece || last_piece.length == 1 || last_piece.end <= i ){\n\n\t\t\t\t// if we have a multi match\n\t\t\t\tif( match_str ){\n\t\t\t\t\tconst len = match_str.length;\n\t\t\t\t\tsequence.add({start:i,end:i+len,length:len,substr:match_str});\n\t\t\t\t\tadded_types.add('1');\n\t\t\t\t}else{\n\t\t\t\t\tsequence.add({start:i,end:i+1,length:1,substr:char});\n\t\t\t\t\tadded_types.add('2');\n\t\t\t\t}\n\n\t\t\t}else if( match_str ){\n\n\t\t\t\tlet clone = sequence.clone(i,last_piece);\n\n\t\t\t\tconst len = match_str.length;\n\t\t\t\tclone.add({start:i,end:i+len,length:len,substr:match_str});\n\n\t\t\t\toverlapping.push(clone);\n\n\t\t\t}else{\n\t\t\t\t// don't add char\n\t\t\t\t// adding would create invalid patterns: 234 => [2,34,4]\n\t\t\t\tadded_types.add('3');\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if we have overlapping\n\t\tif( overlapping.length > 0 ){\n\n\t\t\t// ['ii','iii'] before ['i','i','iii']\n\t\t\toverlapping = overlapping.sort((a,b)=>{\n\t\t\t\treturn a.length() - b.length();\n\t\t\t});\n\n\t\t\tfor( let clone of overlapping){\n\n\t\t\t\t// don't add if we already have an equivalent sequence\n\t\t\t\tif( inSequences(clone, sequences) ){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tsequences.push(clone);\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\n\t\t// if we haven't done anything unique\n\t\t// clean up the patterns\n\t\t// helps keep patterns smaller\n\t\t// if str = 'r₨㎧aarss', pattern will be 446 instead of 655\n\t\tif( i > 0 && added_types.size == 1 && !added_types.has('3') ){\n\t\t\tpattern += sequencesToPattern(sequences,false);\n\t\t\tlet new_seq = new Sequence();\n\t\t\tconst old_seq = sequences[0];\n\t\t\tif( old_seq ){\n\t\t\t\tnew_seq.add(old_seq.last());\n\t\t\t}\n\t\t\tsequences = [new_seq];\n\t\t}\n\n\t}\n\n\tpattern += sequencesToPattern(sequences,true);\n\n\treturn pattern;\n}\n\n\nexport { escape_regex };\n"],"names":["arrayToPattern","chars","filter","Boolean","length","maxValueLength","join","sequencePattern","array","hasDuplicates","pattern","prev_char_count","prev_pattern","forEach","char","i","setToPattern","toArray","Set","size","escape_regex","str","replace","reduce","longest","value","Math","max","unicodeLength","p","Array","from","allSubstrings","input","result","start","substring","suba","subresult","tmp","slice","charAt","push","unshift","code_points","accent_pat","unicode_map","multi_char_reg","max_char_length","latin_convert","latin_condensed","latin","unicode","convert_pat","RegExp","Object","keys","initialize","_code_points","undefined","generateMap","normalize","form","asciifold","_asciifold","toLowerCase","generator","code_point_min","code_point_max","composed","String","fromCharCode","folded","code_point","generateSets","unicode_sets","addMatching","to_add","folded_set","patt","match","add","multi_char","set","sort","a","b","multi_char_patt","mapSequence","strings","min_replacement","chars_replaced","map","substringsToPattern","sub_pat","sequencesToPattern","sequences","all","sequence","seq","len","j","substrs","inSequences","needle_seq","end","needle_parts","parts","part","needle_part","substr","filtered","Sequence","constructor","min","last","clone","position","last_piece","JSON","parse","stringify","last_part","pop","last_substr","clone_last_len","getPattern","match_str","overlapping","added_types","has","new_seq","old_seq"],"mappings":"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"}